{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "CorgiCompose",
  "type": "object",
  "properties": {
    "DatabaseServices": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "driver": { "type": "string" },
          "host": { "type": "string" },
          "user": { "type": "string" },
          "password": { "type": "string" },
          "databaseName": { "type": "string" },
          "port": { "type": "integer" },
          "seedFromDbEnvPath": { "type": "string" },
          "seedFromFilePath": { "type": "string" },
          "seedFromDb": {
            "type": "object",
            "properties": {
              "host": { "type": "string" },
              "databaseName": { "type": "string" },
              "user": { "type": "string" },
              "password": { "type": "string" },
              "port": { "type": "integer" }
            },
            "required": ["host", "databaseName", "user", "password", "port"]
          }
        },
        "required": ["ServiceName", "driver", "host", "user", "password", "databaseName", "port"]
      }
    },
    "Services": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "path": { "type": "string" },
          "ignore_env": { "type": "boolean" },
          "manualRun": { "type": "boolean" },
          "cloneFrom": { "type": "string" },
          "branch": { "type": "string" },
          "environment": {
            "type": "array",
            "items": { "type": "string" }
          },
          "envPath": { "type": "string" },
          "copyEnvFromFilePath": { "type": "string" },
          "port": { "type": "integer" },
          "depends_on_services": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "envAlias": { "type": "string" },
                "suffix": { "type": "string" }
              },
              "required": ["name", "envAlias"]
            }
          },
          "depends_on_db": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "envAlias": { "type": "string" }
              },
              "required": ["name", "envAlias"]
            }
          },
          "beforeStart": { "type": "array", "items": { "type": "string" } },
          "start": { "type": "array", "items": { "type": "string" } },
          "afterStart": { "type": "array", "items": { "type": "string" } },
          "test": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "manualRun": { "type": "boolean" },
                "command": {
                  "type": "array",
                  "items": { "type": "string" }
                }
              },
              "required": ["name", "command"]
            }
          }
        },
        "required": ["ServiceName", "path"]
      }
    },
    "Required": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "why": { "type": "array", "items": { "type": "string" } },
          "install": { "type": "array", "items": { "type": "string" } },
          "optional": { "type": "boolean" },
          "checkCmd": { "type": "string" }
        },
        "required": ["Name", "why", "install"]
      }
    }
  },
  "required": ["DatabaseServices", "Services", "Required"]
}
